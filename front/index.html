<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>VagaCursos</title>

	<script src="js/jquery-3.4.1.min.js"></script>

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>
<body>
	<div id="div_inicial" class="container">
		<div class="row">
			<div class="col-md-3">
				<h1>VagaCursos</h1>

				<img src="imagens/logo.jpg" width="100%">
			</div>

			<div class="col-md-6">
				<br><br>
				<div class="row">
					<input class="col-md-6" type="text" placeholder="Email" id="email_login" name="email">
					<div class="w-100"></div>
					<input class="col-md-6" type="password" placeholder="Senha" id="senha_login" name="senha">
					<div class="w-100"></div>
					<input class="col-md-6" type="button" value="Login" id="login">
				</div>

				<br>

				<div class="row">
					<input class="col-md-6" type="button" value="Cadastre-se" id="cadastre_se">
				</div>

			</div>
		</div>
	</div>

	<div id="div_cadastro" class="container">
		<div class="row">
			<div class="col-md-3">
				<h1>Cadastro</h1>

				<img src="imagens/logo.jpg" width="100%">
			</div>

			<div class="col-md-6">
				<br><br>

				<div class="row">
					<input class="col-md-6" type="text" placeholder="Nome" id="nome" name="nome">
					<div class="w-100"></div>
					<input class="col-md-6" type="text" placeholder="Sobrenome" id="sobrenome" name="sobrenome">
					<div class="w-100"></div>
					<input class="col-md-6" type="text" placeholder="Email" id="email_cadastro" name="email">
					<div class="w-100"></div>
					<input class="col-md-6" type="password" placeholder="Senha" id="senha_cadastro" name="senha">
					<div class="w-100"></div>
					<input class="col-md-6" type="button" value="Cadastrar" id="cadastrar">					
				</div>

				<br>

				<div class="row">
					<input class="col-md-6" type="button" value="Voltar" id="voltar_inicial">
				</div>
			</div>
		</div>
	</div>

	<div id="div_principal">
		<div class="row">
				<div class="col-md-1">
					<img src="imagens/logo.jpg" height="50" width="100">
				</div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1"></div>
				<div class="col-md-1 row">
					<span class="col-md-6" id="bem_vindo_mensagem">Ol√°, Lucas</span>
					<img id="imagem_perfil" class="col-md-6" src="imagens/default-avatar.jpg">
				</div>
		</div>

		<br>

		<div class="row">
			<div class="col-md-1">
				<input type="button" name="categorias" value="Categorias">
			</div>
			<div class="col-md-1"></div>
			<div class="col-md-1"></div>
			<div class="col-md-4">
				<input type="text" id="buscar_curso" placeholder="Curso">
				<input type="button" id="buscar_curso" value="Buscar">
			</div>
			<div class="col-md-2">
				<input type="button" id="adicionar_curso" value="Adicionar curso">
			</div>
			<div class="col-md-1"></div>
			<div class="col-md-1"></div>
			<div class="col-md-1"></div>
		</div>

		<div class="row" id="div_cursos">
			
		</div>
	</div>
</body>
</html>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script type="text/javascript">
	String.prototype.hashCode = function() {
	  	var hash = 0, i, chr;
	  	if (this.length === 0) return hash;
	  	
	  	for (i = 0; i < this.length; i++) {
	    	chr   = this.charCodeAt(i);
	    	hash  = ((hash << 5) - hash) + chr;
	    	hash |= 0; // Convert to 32bit integer
	  	}
	  	return hash;
	};

	document.getElementById("div_cadastro").style.display = "none";
	document.getElementById("div_principal").style.display = "";
	document.getElementById("div_inicial").style.display = "none"

	document.getElementById("cadastre_se").onclick = function(){
		document.getElementById("div_inicial").style.display = "none";
		document.getElementById("div_principal").style.display = "none";
		document.getElementById("div_cadastro").style.display = "";

		document.getElementById("email_login").value = "";
		document.getElementById("senha_login").value = "";
	}

	document.getElementById("voltar_inicial").onclick = function(){
		document.getElementById("div_inicial").style.display = "";
		document.getElementById("div_cadastro").style.display = "none";
		document.getElementById("div_principal").style.display = "none";
	}

	document.getElementById("login").onclick = function(){
		var data = {
			email: document.getElementById("email_login").value,
			senha: document.getElementById("senha_login").value.hashCode().toString()
		};

		axios
			.post("http://localhost:3000/login/", data)
			.then(response => {
				document.getElementById("div_inicial").style.display = "none";
				document.getElementById("div_cadastro").style.display = "none";
				document.getElementById("div_principal").style.display = "";
			})
			.catch(error => {
				alert(error.response.data);
			});
	}

	document.getElementById("cadastrar").onclick = function(){
		var data = {
			nome: document.getElementById("nome").value,
			sobrenome: document.getElementById("sobrenome").value,
			email: document.getElementById("email_cadastro").value,
			senha: document.getElementById("senha_cadastro").value.hashCode().toString()
		};

		axios
			.post("http://localhost:3000/cadastro/", data)
	    	.then(response => {
	    		console.log(response);

	    		document.getElementById("div_inicial").style.display = "none";
				document.getElementById("div_cadastro").style.display = "none";
				document.getElementById("div_principal").style.display = "";

				document.getElementById("nome").value = "";
				document.getElementById("sobrenome").value = "";
				document.getElementById("email_cadastro").value = "";
				document.getElementById("senha_cadastro").value = ";"
	    	})
	    	.catch(err => {
	    		alert(err.response.data);
	    	});
	}
</script>